(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{80:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(45),s=n.n(a),i=n(46),u="csrf-token",o="CSRF-Token";function d(e){var t;return null===(t=document.cookie.split("; ").find((function(t){return(null===t||void 0===t?void 0:t.split("=")[0])===e})))||void 0===t?void 0:t.split("=")[1]}var j=n.n(i).a.create({headers:[{name:o,value:d(u)}].reduce((function(e,t){return t.value&&(e[t.name]=t.value),e}),{})}),b=j,l=n(28),p=n(84),h=n(7),O=n(1);var v=function(e){var t=e.product,n=e.onSubmit,r={price:t?t.price:""};return Object(O.jsx)(h.c,{initialValues:r,validate:function(){return{}},onSubmit:n,children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(h.b,{children:[Object(O.jsx)(h.a,{type:"text",name:"price",placeholder:"Price"}),Object(O.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})},x=n(6);var f=function(){var e=Object(l.b)(),t=Object(x.f)(),n=Object(p.a)((function(e){return b.post("/api/v1/products",e)}),{onSuccess:function(){e.invalidateQueries("products")}});return Object(O.jsx)(v,{onSubmit:function(e,r){var c=r.setSubmitting;n.mutate(e),null===c||void 0===c||c(!1),t.push("/products")}})},m=n(83);function g(e){var t=e.product,n=e.handleEdit,r=e.handleDelete,c=e.handleDetail;return Object(O.jsxs)(O.Fragment,{children:[t.price,Object(O.jsx)("br",{}),Object(O.jsx)("button",{type:"button",onClick:function(){return c(t)},children:"detail"}),Object(O.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"edit"}),Object(O.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"delete"})]})}var S=function(){var e,t,n=Object(x.f)(),r=Object(l.b)(),c=Object(m.a)("products",(function(){return b.get("/api/v1/products").then((function(e){return e.data}))})),a=Object(p.a)((function(e){var t=e.id;return b.delete("/api/v1/products/".concat(t))}),{onSuccess:function(){r.invalidateQueries("products")}}),s=function(e){var t=e.id;n.push("/products/update/".concat(t))},i=function(e){var t=e.id;a.mutate({id:t})},u=function(e){var t=e.id;n.push("/products/detail/".concat(t))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("p",{children:[null===(e=c.data)||void 0===e?void 0:e.length," products"]}),Object(O.jsx)("ul",{children:null===(t=c.data)||void 0===t?void 0:t.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)(g,{product:e,handleDelete:i,handleEdit:s,handleDetail:u})},e.id)}))})]})};var w=function(){var e=Object(x.g)().id,t=Object(m.a)(["products",e],(function(){return b.get("/api/v1/products/".concat(e)).then((function(e){return e.data}))})),n=t.data;if(t.isLoading)return Object(O.jsx)("div",{children:"Loading..."});var r=n;return Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:r.price}),Object(O.jsx)("br",{})]})};var y=function(){var e=Object(x.g)().id,t=Object(l.b)(),n=Object(x.f)(),r=Object(m.a)(["products",e],(function(){return b.get("/api/v1/products/".concat(e)).then((function(e){return e.data}))})),c=r.data,a=r.isLoading,s=Object(p.a)((function(t){return b.put("/api/v1/products/".concat(e),t).then((function(e){return e.data}))}),{onSuccess:function(){t.invalidateQueries("products")}});if(a)return Object(O.jsx)("div",{children:"Loading..."});var i=c;return Object(O.jsx)(v,{product:i,onSubmit:function(e,t){var r=t.setSubmitting;s.mutate(e),null===r||void 0===r||r(!1),n.push("/products")}})};var k=function(e){var t=e.user,n=e.onSubmit,r={username:t?t.username:"",passwordHash:t?t.passwordHash:""};return Object(O.jsx)(h.c,{initialValues:r,validate:function(){return{}},onSubmit:n,children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(h.b,{children:[Object(O.jsx)(h.a,{type:"text",name:"username",placeholder:"Username"}),Object(O.jsx)(h.a,{type:"text",name:"passwordHash",placeholder:"PasswordHash"}),Object(O.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})};var C=function(){var e=Object(l.b)(),t=Object(x.f)(),n=Object(p.a)((function(e){return b.post("/api/v1/users",e)}),{onSuccess:function(){e.invalidateQueries("users")}});return Object(O.jsx)(k,{onSubmit:function(e,r){var c=r.setSubmitting;n.mutate(e),null===c||void 0===c||c(!1),t.push("/users")}})};function L(e){var t=e.user,n=e.handleEdit,r=e.handleDelete,c=e.handleDetail;return Object(O.jsxs)(O.Fragment,{children:[t.username,Object(O.jsx)("br",{}),Object(O.jsx)("button",{type:"button",onClick:function(){return c(t)},children:"detail"}),Object(O.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"edit"}),Object(O.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"delete"})]})}var D=function(){var e,t,n=Object(x.f)(),r=Object(l.b)(),c=Object(m.a)("users",(function(){return b.get("/api/v1/users").then((function(e){return e.data}))})),a=Object(p.a)((function(e){var t=e.id;return b.delete("/api/v1/users/".concat(t))}),{onSuccess:function(){r.invalidateQueries("users")}}),s=function(e){var t=e.id;n.push("/users/update/".concat(t))},i=function(e){var t=e.id;a.mutate({id:t})},u=function(e){var t=e.id;n.push("/users/detail/".concat(t))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("p",{children:[null===(e=c.data)||void 0===e?void 0:e.length," users"]}),Object(O.jsx)("ul",{children:null===(t=c.data)||void 0===t?void 0:t.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)(L,{user:e,handleDelete:i,handleEdit:s,handleDetail:u})},e.id)}))})]})};var E=function(){var e=Object(x.g)().id,t=Object(m.a)(["users",e],(function(){return b.get("/api/v1/users/".concat(e)).then((function(e){return e.data}))})),n=t.data;if(t.isLoading)return Object(O.jsx)("div",{children:"Loading..."});var r=n;return Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:r.username}),Object(O.jsx)("br",{}),Object(O.jsx)("label",{children:r.passwordHash}),Object(O.jsx)("br",{})]})};var P=function(){var e=Object(x.g)().id,t=Object(l.b)(),n=Object(x.f)(),r=Object(m.a)(["users",e],(function(){return b.get("/api/v1/users/".concat(e)).then((function(e){return e.data}))})),c=r.data,a=r.isLoading,s=Object(p.a)((function(t){return b.put("/api/v1/users/".concat(e),t).then((function(e){return e.data}))}),{onSuccess:function(){t.invalidateQueries("users")}});if(a)return Object(O.jsx)("div",{children:"Loading..."});var i=c;return Object(O.jsx)(k,{user:i,onSubmit:function(e,t){var r=t.setSubmitting;s.mutate(e),null===r||void 0===r||r(!1),n.push("/users")}})},Q=n(23),F=n.n(Q),H=n(30),U=n(31);var R=function(){var e=Object(r.useState)(""),t=Object(U.a)(e,2),n=t[0],c=t[1],a=Object(x.f)(),s=Object(l.b)(),i=function(e,t){var n=t.setSubmitting;if(e.response&&e.response.data){var r=e.response.data.error;r&&c(r)}null===n||void 0===n||n(!1)},u=function(){var e=Object(H.a)(F.a.mark((function e(t,n){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,e.prev=1,e.next=4,b.post("/auth/login",t);case 4:return null===r||void 0===r||r(!1),e.next=7,s.invalidateQueries("user");case 7:a.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),i(e.t0,{setSubmitting:r});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(O.jsx)(h.c,{initialValues:{username:"",password:""},validate:function(){return{}},onSubmit:u,children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(h.b,{children:[Object(O.jsx)(h.a,{type:"text",name:"username",placeholder:"Username"}),Object(O.jsx)(h.a,{type:"password",name:"password",placeholder:"Password"}),n&&Object(O.jsx)("div",{children:n}),Object(O.jsx)("button",{type:"submit",disabled:t,children:"Login"})]})}})};var N=function(){var e=Object(r.useState)(""),t=Object(U.a)(e,2),n=t[0],c=t[1],a=function(){var e=Object(H.a)(F.a.mark((function e(t,n){var r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,e.prev=1,e.next=4,b.post("/auth/register",t);case 4:null===r||void 0===r||r(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0.response&&e.t0.response.data&&(a=e.t0.response.data.error)&&c(a),null===r||void 0===r||r(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(O.jsx)(h.c,{initialValues:{username:"",email:"",password:"",passwordConfirm:""},validate:function(){return{}},onSubmit:a,children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(h.b,{children:[Object(O.jsx)(h.a,{type:"text",name:"username",placeholder:"Username"}),Object(O.jsx)(h.a,{type:"text",name:"email",placeholder:"Email"}),Object(O.jsx)(h.a,{type:"password",name:"password",placeholder:"Password"}),Object(O.jsx)(h.a,{type:"password",name:"passwordConfirm",placeholder:"Confirm password"}),n&&Object(O.jsx)("div",{children:n}),Object(O.jsx)("button",{type:"submit",disabled:t,children:"Register"})]})}})},V=n(9);var J=function(){return Object(m.a)("user",(function(){return b.get("/auth/me")}),{retry:!1}).data,Object(r.useEffect)((function(){d(u)||j.get("/auth/csrf").then((function(){j.defaults.headers[o]=d(u)})).catch((function(e){console.warn("Received error while fetching CSRF token :",e)}))}),[]),Object(O.jsxs)(V.a,{children:[Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{className:"flex",children:[Object(O.jsxs)("li",{children:[Object(O.jsx)(V.b,{to:"/",children:"Home"}),Object(O.jsx)("br",{})]}),Object(O.jsxs)("li",{className:"ml-10",children:[Object(O.jsx)(V.b,{to:"/login",children:"Login"}),Object(O.jsx)("br",{}),Object(O.jsx)(V.b,{to:"/register",children:"Register"}),Object(O.jsx)("br",{})]}),Object(O.jsxs)("li",{className:"ml-10",children:[Object(O.jsx)(V.b,{to:"/products",children:"Products"}),Object(O.jsx)("br",{}),Object(O.jsx)(V.b,{to:"/products/create",children:"Create a Product"}),Object(O.jsx)("br",{})]}),Object(O.jsxs)("li",{className:"ml-10",children:[Object(O.jsx)(V.b,{to:"/users",children:"Users"}),Object(O.jsx)("br",{}),Object(O.jsx)(V.b,{to:"/users/create",children:"Create a User"}),Object(O.jsx)("br",{})]})]})}),Object(O.jsxs)("main",{children:[Object(O.jsx)(x.a,{path:"/products",children:Object(O.jsx)("h1",{children:"Products"})}),Object(O.jsx)(x.a,{path:"/users",children:Object(O.jsx)("h1",{children:"Users"})}),Object(O.jsxs)(x.c,{children:[Object(O.jsx)(x.a,{path:"/products/create",component:f}),Object(O.jsx)(x.a,{path:"/products/update/:id",component:y}),Object(O.jsx)(x.a,{path:"/products/detail/:id",component:w}),Object(O.jsx)(x.a,{path:"/products",component:S}),",",Object(O.jsx)(x.a,{path:"/users/create",component:C}),Object(O.jsx)(x.a,{path:"/users/update/:id",component:P}),Object(O.jsx)(x.a,{path:"/users/detail/:id",component:E}),Object(O.jsx)(x.a,{path:"/users",component:D}),Object(O.jsx)(x.a,{path:"/login",component:R}),Object(O.jsx)(x.a,{path:"/register",component:N})]})]})]})},B=new(n(82).a);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(l.a,{client:B,children:Object(O.jsx)(J,{})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.420c6d7e.chunk.js.map